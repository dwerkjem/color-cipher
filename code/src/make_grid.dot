digraph UnicodeGridScript {
    rankdir=LR;
    node [shape=box];

    subgraph cluster_1 {
        label = "Script Initialization";
        style=filled;
        color=lightgrey;

        Start -> Initialize_Grid [label="Fill grid with character names"];
        Initialize_Grid -> Skip_Codepoints [label="Skip certain codepoints"];
        Skip_Codepoints -> Fill_Grid [label="Fill grid with Unicode characters"];
        Fill_Grid -> Save_Grid [label="Save grid to grid.txt"];
    }

    subgraph cluster_2 {
        label = "Text Processing";
        style=filled;
        color=lightblue;

        Input_Source [shape=ellipse, label="Input (file/text)"];
        Encode_Process [label="encode(text)"];
        Decode_Process [label="decode(text)"];
        Prepare_Text [label="prepare_plain_text(text)"];

        Input_Source -> Prepare_Text [label="Call prepare_plain_text()"];
        Prepare_Text -> Encode_Process [label="Call encode()"];
        Input_Source -> Decode_Process [label="Call decode()"];
    }

    subgraph cluster_3 {
        label = "Output Handling";
        style=filled;
        color=lightyellow;

        Output_Decision [shape=diamond, label="Output to file?"];
        Print_Console [label="Print to console"];
        Write_File [label="Write to file"];

        Encode_Process -> Output_Decision;
        Decode_Process -> Output_Decision;
        Output_Decision -> Write_File [label="Yes"];
        Output_Decision -> Print_Console [label="No"];
    }

    Start [label="Start Script"];
    Save_Grid [label="Grid saved as grid.txt"];
    End [label="End Script"];

    Start -> Input_Source;
    Save_Grid -> End;
    Print_Console -> End;
    Write_File -> End;
}
